<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <title>InfoMagic – Touch</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>

  <body class="touch-page">
    <div id="thumbs"></div>

    <div id="controls">
      <div class="btn" onclick="send('prev')">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
        </svg>
      </div>
      <div class="btn" onclick="send('toggle')">
        <svg viewBox="0 0 24 24" fill="currentColor" width="64" height="64">
          <path d="M8 5v14l11-7z" />
        </svg>
      </div>
      <div class="btn" onclick="send('next')">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
        </svg>
      </div>
    </div>

    <script>
      /* ───── THUMBNAILS ───── */
      async function loadThumbs() {
        const imgs = await (await fetch('/api/images')).json();
        thumbs.innerHTML = '';
        imgs.forEach(img => {
          const d = document.createElement('div');
          d.className = 'thumb';
          d.innerHTML = `<img src="${img.thumb}">`;
          thumbs.appendChild(d);
        });
      }

      /* ───── SLIDESHOW CONTROL ───── */
      function send(action) {
        fetch('/api/slideshow', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ action }),
        });
      }

      /* ───── INIT ───── */
      loadThumbs();
      setInterval(loadThumbs, 5000);
    </script>
  </body>
</html>
