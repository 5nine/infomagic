<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8">
<title>InfoMagic – Touch</title>
<link rel="stylesheet" href="/styles.css">
</head>

<body class="touch-page">

<div id="thumbs"></div>

<div id="controls">
  <div class="btn" onclick="send('prev')">⏮</div>
  <div class="btn" onclick="send('toggle')">⏯</div>
  <div class="btn" onclick="send('next')">⏭</div>
</div>

<script>
/* ───── THUMBNAILS ───── */
async function loadThumbs(){
  const imgs = await (await fetch('/api/images')).json();
  thumbs.innerHTML='';
  imgs.forEach(img=>{
    const d=document.createElement('div');
    d.className='thumb';
    d.innerHTML=`<img src="${img.thumb}">`;
    thumbs.appendChild(d);
  });
}

/* ───── SLIDESHOW CONTROL ───── */
function send(action){
  fetch('/api/slideshow',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({ action })
  });
}

/* ───── INIT ───── */
loadThumbs();
setInterval(loadThumbs, 5000);
</script>

</body>
</html>
